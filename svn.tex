\documentclass{beamer}

\usepackage{graphicx,hyperref,udesc,url}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{booktabs}
\usepackage[portuges]{babel}


\title[Subversion]{Sistema de Controle de Vers\~ao\\Apache Subversion}

\author[Rafael Castro, Lucas Mendes]{
    Rafael Castro, Lucas Mendes\\\medskip
    {\small \url{rafaelcgs10@gmail.com}} \\ 
{\small \url{lucasmpw@gmail.com}}}

\institute[UDESC]{
    Departamento de Ci\^encia da Computa\c{c}\~ao \\
    Centro de Ci\^encias e Tecnol\'ogias\\
Universidade do Estado de Santa Catarina}

\begin{document}

\begin{frame}
    \titlepage

\end{frame}

\begin{frame}
    \frametitle{Sum\'ario}
    \tableofcontents
\end{frame}

\section{Introdu\c{c}\~ao}


\begin{frame}
    \begin{figure}
        \centering
        \includegraphics[width = 0.5\textwidth]{figures/Subversion}
    \end{figure}

    \frametitle{Hist\'oria}
    \begin{itemize}
        \item CollabNet fundou em 2000
        \item Foi aceito em uma incubadora do grupo Apache em 2009
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Motiva\c{c}\~ao}
    \begin{itemize}
        \item Competir com o CVS
        \item Proposta Livre
        \item Corrigir v\'arios problemas do CVS
        \item Novas funcionalidades
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Quem usa}
    \begin{itemize}
        \item Comunidade de Software Livre
        \item Grupo Apache
        \item Google
        \item Apple
    \end{itemize}
\end{frame}

\section{Caracter\'isticas em Particular}
\begin{frame}
    \frametitle{Pontos Importantes}
    \begin{itemize}
        \item Versionamento de diretórios
        \item Histórico de versões efetivo
        \item Manipulação consistente de dados
        \item Commit \'atomico
        \item Versionamento de metadados
        \item Ramificações e rotulagem eficiente
        \item Hackability
    \end{itemize}
\end{frame}


\begin{frame}
    \frametitle{Reposit\'orio}
    \begin{columns}

        \begin{column}{.555555\textwidth}
            \begin{block}{Arquitetura}
                \begin{columns}
                    \begin{column}{.5\textwidth}
                        \begin{itemize}
                            \item Cliente-Servidor
                        \end{itemize}
                    \end{column}
                    \begin{column}{.5\textwidth}
                        \begin{figure}
                            \includegraphics[width = 0.7\textwidth]{figures/repositorio}
                        \end{figure}
                    \end{column}
                \end{columns}
            \end{block}
        \end{column}

        \begin{column}{.5\textwidth}
            \begin{block}{Estrutura de arquivos}
                \begin{columns}
                    \begin{column}{.5\textwidth}
                        \begin{itemize}
                            \item \'Arvore de arquivos
                        \end{itemize}
                    \end{column}
                    \begin{column}{.5\textwidth}
                        \begin{figure}
                            \includegraphics[width = 0.7\textwidth]{figures/arquivos}
                        \end{figure}
                    \end{column}
                \end{columns}
            \end{block}
        \end{column}
    \end{columns}
\end{frame}


\section{Conceitos B\'asicos}

\begin{frame}
    \frametitle{Reposit\'orio 2}

    \begin{columns}
        \begin{column}{.5\textwidth}
            \begin{itemize}
                \item Simples cole\c{c}\~ao de arquivos
                \item Centralizado
                \item Working copy - Os desenvolvedores trabalham com copias locais
            \end{itemize}
        \end{column}
        \begin{column}{.5\textwidth}
            \begin{block}{Pastas}
                \begin{enumerate}
                    \item .svn
                    \item trunk
                    \item branches
                    \item tags
                \end{enumerate}
            \end{block}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}
    \frametitle{Revis\~oes}
    \begin{columns}
        \begin{column}{.5\textwidth}
            \begin{itemize}
                \item Estado do reposit\'orio
                \item Uma maneira de voltar no tempo
                \item Podem ser marcado com Tags
            \end{itemize}
        \end{column}
        \begin{column}{.5\textwidth}
            \begin{figure}
                \includegraphics[width=1.0\textwidth]{figures/revisao}
            \end{figure}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}
    \frametitle{Modificando Arquivos}
    \begin{block}{O problema do compartilhamento de arquivo}
        \begin{columns}
            \begin{column}{.5\textwidth}
                \begin{itemize}
                    \item Sobrescrever
                \end{itemize}
            \end{column}
            \begin{column}{.5\textwidth}
                \begin{figure}
                    \includegraphics[width=0.9\textwidth]{figures/problem}
                \end{figure}
            \end{column}
        \end{columns}
    \end{block}
\end{frame}

\begin{frame}
    \frametitle{Modificando Arquivos}
    \begin{block}{A solu\c{c}\~ao Alocar-Modifica-Desalocar}
        \begin{columns}
            \begin{column}{.5\textwidth}
                \begin{itemize}
                    \item Inconsist\^encias
                    \item Serializa\c{c}\~ao
                    \item Administra\c{c}\~ao
                \end{itemize}
            \end{column}
            \begin{column}{.5\textwidth}
                \begin{figure}
                    \includegraphics[width=0.9\textwidth]{figures/lockmodifyunlock}
                \end{figure}
            \end{column}
        \end{columns}
    \end{block}
\end{frame}

\begin{frame}
    \frametitle{Modificando Arquivos}
    \begin{block}{A solu\c{c}\~ao Copiar-Modificar-Unificar}
        \begin{columns}
            \begin{column}{.3\textwidth}
                \begin{itemize}
                    \item Paralelismo seguro
                    \item Merge
                \end{itemize}
            \end{column}
            \begin{column}{.7\textwidth}
                \begin{figure}
                    \includegraphics[width=1.0\textwidth]{figures/copymodifymerge}
                \end{figure}
            \end{column}
        \end{columns}
    \end{block}
\end{frame}

\begin{frame}
    \frametitle{Trunk, Branches e Tags}

    \begin{itemize}
        \item Linhas de desenvolvimento - Workflow padr\~ao
        \item Cheap and simple copy
    \end{itemize}
    \begin{columns}
        \begin{column}{.5\textwidth}
            \begin{figure}
                \includegraphics[width= 0.5\textwidth]{figures/copy}
            \end{figure}
        \end{column}
        \begin{column}{.5\textwidth}
            \begin{figure}
                \includegraphics[width = 1.1\textwidth]{figures/branche}
            \end{figure}
    %\end{column}
    %\begin{column}{.5\textwidth}
            \begin{block}{Tags}
                \begin{itemize}
                    \item Etiquetas de revis\~oes
                \end{itemize}
            \end{block}
        \end{column}

        %\end{column}
    \end{columns}

\end{frame}


\section{Comandos B\'asicos}

\begin{frame}[fragile]
    \frametitle{Come\c{c}ando uma Working Copy}
    \begin{itemize}
        \item Assembla: www.assembla.com
    \end{itemize}

%\setbeamercolor{block title}{use=structure,fg=white,bg=purple!75!black}
%\setbeamercolor{block body}{use=structure,fg=white,bg=black!20!black}

    \begin{bash}{}
        {\tiny
    \begin{verbatim}
    svn checkout https://subversion.assembla.com/svn/teste-soft --username=rafaelcgs10
    ... arquivos baixados ...
     svn info

    Working Copy Root Path: /home/user/teste-svn/teste-soft
    URL: https://subversion.assembla.com/svn/teste-soft
    Relative URL: ^/
    Raiz do Repositório: https://subversion.assembla.com/svn/teste-soft
    UUID do repositório: 8d1ad2a0-f3b6-4a4c-8996-bb2a8e12f73e
    Revisão: 20
    Tipo de Nó: diretório
    Agendado: normal
    Autor da Última Mudança: rafaelcgs10
    Revisão da Última Mudança: 20
    Data da Última Mudança: 2015-03-31 09:18:57 -0300 (Ter, 31 Mar 2015)
    \end{verbatim}
    }
    \end{bash}

\end{frame}

\begin{frame}[fragile]
    \frametitle{Visualizando arquivos}

%\setbeamercolor{block title}{use=structure,fg=white,bg=purple!75!black}
%\setbeamercolor{block body}{use=structure,fg=white,bg=black!20!black}
    \begin{bash}{}
    {\tiny
    \begin{verbatim}
    pwd
    ~/teste-soft

    svn list
    branches/
    readme.textile
    source/
    tags/
    trunk/

    cd trunk/

    svn list
    README
    frutas/

    cd frutas/

    svn list
    banana.c
    melao.c
    uva.c
    \end{verbatim}
    }
    \end{bash}

\end{frame}

\begin{frame}[fragile]
    \frametitle{Criando um Branche}

%\setbeamercolor{block title}{use=structure,fg=white,bg=purple!75!black}
%\setbeamercolor{block body}{use=structure,fg=white,bg=black!20!black}
    \begin{bash}{}
    {\tiny
    \begin{verbatim}
    cd ..
    cd ..
    pwd
    ~/teste-soft

    svn copy trunk/ branches/copia-rafael
    A         branches/copia-rafael

    svn commit -m "branche do rafael criado"

    Adicionando    branches/copia-rafael

    Committed revision 22.
    \end{verbatim}
    }
    \end{bash}

\end{frame}


\begin{frame}[fragile]
    \frametitle{Trabalhando na Branche}

%\setbeamercolor{block title}{use=structure,fg=white,bg=purple!75!black}
%\setbeamercolor{block body}{use=structure,fg=white,bg=black!20!black}
    \begin{bash}{}
    {\tiny
    \begin{verbatim}
    cd branches
    cd copia-rafael
    cd frutas

    ls
    banana.c melao.c uva.c

    echo A pera é uma fruta verde > pera.c

    svn add pera.c
    A       pera.c

    svn commit -m "Arquivo pera.c adicionado"
    Adicionando    pera.c
    Transmitindo dados do arquivo .
    Committed revision 23.
    \end{verbatim}
    }
    \end{bash}

\end{frame}

\begin{frame}[fragile]
    \frametitle{Reintegrando o Branche no Trunk}

%\setbeamercolor{block title}{use=structure,fg=white,bg=purple!75!black}
%\setbeamercolor{block body}{use=structure,fg=white,bg=black!20!black}
    \begin{bash}{}
    {\tiny
    \begin{verbatim}
    pwd
    ~/teste-soft/trunk/frutas

    svn merge --reintegrate ^/branches/copia-rafael/frutas
    --- Merging differences between repository URLs into '.':
       C pera.c
       Tree conflict on 'pera.c'
          > local file obstruction, incoming file add upon merge
          Select: (r) mark resolved, (p) postpone, (q) quit resolution, (h) help: 
          p

    --- Recording mergeinfo for merge between repository URLs into '.':
     U   .
     Summary of conflicts:
       Tree conflicts: 1

    svn status
     M      .
           C pera.c
                 >   local file obstruction, incoming file add upon merge
                 Summary of conflicts:
                   Tree conflicts: 1

    svn resolve --accept=working pera.c
    Estado de conflito resolvido para 'pera.c'

    svn commit -m "Conflito resolvido"
    Enviando       .

    Committed revision 25.
    \end{verbatim}
    }
    \end{bash}

\end{frame}

\begin{frame}[fragile]
    \frametitle{Atualizando o Branche}

%\setbeamercolor{block title}{use=structure,fg=white,bg=purple!75!black}
%\setbeamercolor{block body}{use=structure,fg=white,bg=black!20!black}
    \begin{bash}{}
    {\tiny
    \begin{verbatim}
    pwd
    ~/teste-soft/branches/frutas

    svn up
    Updating '.':
    Na revisão 29.

    svn merge ^/trunk/frutas
    --- Merging r27 through r29 into '.':
    C    pera.c
    --- Recording mergeinfo for merge of r27 through r29 into '.':
     U   .
     Conflict discovered in file 'pera.c'.
     Select: (p) postpone, (df) show diff, (e) edit file, (m) merge,
             (mc) my side of conflict, (tc) their side of conflict,
                     (s) show all options: p

    \end{verbatim}
    }
    \end{bash}

\end{frame}

\begin{frame}[fragile]
    \frametitle{Resolvendo conflito no Branche}

%\setbeamercolor{block title}{use=structure,fg=white,bg=purple!75!black}
%\setbeamercolor{block body}{use=structure,fg=white,bg=black!20!black}
    \begin{bash}{}
    {\tiny
    \begin{verbatim}

    cat pera.c
    <<<<<<< .working
    A pera é uma fruta verde
    =======
    A pera é um fruta doce
    >>>>>>> .merge-right.r29

    echo A pera é uma fruta verde e doce > pera.c

    svn resolve --accept=working pera.c
    Estado de conflito resolvido para 'pera.c'

    Enviando       .
    Enviando       pera.c
    Transmitindo dados do arquivo .
    Committed revision 30.

    svn commit -m "Conflito resolvido"
    Enviando       .
    Enviando       pera.c
    Transmitindo dados do arquivo .
    Committed revision 30.
    \end{verbatim}
    }
    \end{bash}

\end{frame}
\begin{frame}[fragile]
    \frametitle{Reintegrando o Branche}

%\setbeamercolor{block title}{use=structure,fg=white,bg=purple!75!black}
%\setbeamercolor{block body}{use=structure,fg=white,bg=black!20!black}
    \begin{bash}{}
    {\tiny
    \begin{verbatim}
    pwd
    ~/teste-soft/trunk/frutas
    
    svn merge --reintegrate ^/branches/copia-rafael/frutas
    --- Merging differences between repository URLs into '.':
    U    pera.c
     U   .
     --- Recording mergeinfo for merge between repository URLs into '.':
      G   .

    cat pera.c
    A pera é uma fruta verde e doce
    \end{verbatim}
    }
    \end{bash}

\end{frame}
\section{Conclus\~ao}

\begin{frame}
    \frametitle{Conclus\~ao}

    \begin{itemize}
        \item SVN \'e fac\'il de usar
        \item A solu\c{c}\~ao Copiar-Modificar-Unificar resolve bem o problema de conflitos
        \item Deve atender bem a maioria das necessidades dos engenheiros de software
        \item Tem suas limita\c{c}\~oes: N\~ao \'e poss\'ivel commitar localmente
    \end{itemize}
\end{frame}

\section{Refer\^encias}
\begin{frame}
    \frametitle{Refer\^encias}

    \begin{itemize}
        \item SVN Book - http://svnbook.red-bean.com/
        \item SVN Tutorial - http://www.tutorialspoint.com/svn/
    \end{itemize}
\end{frame}

\end{document}
